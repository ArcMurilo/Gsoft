unit WinCash.Business.Desconto.AliquotaGeral;

interface

uses
  WinCash.Business.Desconto.AliquotaDesconto;

type
  TDescontoAliquotaGeral = class
  private
    FAliquotaDescontoMaximo : TAliquotaDesconto;
  public
    property aliquotaDescontoMaximo: TAliquotaDesconto read FAliquotaDescontoMaximo;
    constructor Create(aAliquotaDescontoMaximo : TAliquotaDesconto);
    function descontoMaximo(valorTotalBruto : double) : double;
    function isValorLiquidoValido(valorTotalLiquido, valorTotalBruto: double) : boolean;
  end;

implementation

{ TDescontoAliquotaGeral }

constructor TDescontoAliquotaGeral.Create(aAliquotaDescontoMaximo: TAliquotaDesconto);
begin
  self.FAliquotaDescontoMaximo := aAliquotaDescontoMaximo;
end;

function TDescontoAliquotaGeral.descontoMaximo(valorTotalBruto : double) : double;
begin
  result := valorTotalBruto * self.aliquotaDescontoMaximo.aliquota / 100;
end;

function TDescontoAliquotaGeral.isValorLiquidoValido(valorTotalLiquido, valorTotalBruto: double) : boolean;
begin
  result :=
    valorTotalLiquido >= valorTotalBruto - self.descontoMaximo(valorTotalBruto);
end;

end.
